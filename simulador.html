<!DOCTYPE html>
<html>

<body>

  <label for="cars">Escolha o estado:</label>
  <select id="municipios" onchange="changeFunc();"></select>

  <input id="1" type="range" min="0" max="100" step="1" value="50" data-orientation="vertical">
  <input id="2" type="range" min="0" max="100" step="1" value="50" data-orientation="vertical">
  <input id="3" type="range" min="0" max="100" step="1" value="50" data-orientation="vertical">
  <input id="4" type="range" min="0" max="100" step="1" value="50" data-orientation="vertical">
  <input id="5" type="range" min="0" max="100" step="1" value="50" data-orientation="vertical">
  <input id="6" type="range" min="0" max="100" step="1" value="50" data-orientation="vertical">
  <input id="7" type="range" min="0" max="100" step="1" value="50" data-orientation="vertical">
  <input id="8" type="range" min="0" max="100" step="1" value="50" data-orientation="vertical">
  <input id="9" type="range" min="0" max="100" step="1" value="50" data-orientation="vertical">

  <button onclick="teste()">teste</button>
  <input id="morte" type="text">

  <script src="http://idsimulador.herokuapp.com/muni/municipios_data.json"></script>

  <script>
    function changeFunc() {
      var selectBox = document.getElementById("municipios");
      var selectedValue = selectBox.options[selectBox.selectedIndex].value;

      console.log("mort ", dados[selectedValue].Mortalidade_infantil * 100)

      document.getElementById("morte").value = dados[selectedValue].Mortalidade_infantil * 100

      document.getElementById("1").value = dados[selectedValue].Coleta_de_Lixo * 100
      document.getElementById("2").value = dados[selectedValue].IDHM_Educacao * 100
      document.getElementById("3").value = dados[selectedValue].Renda_per_capita * 100
      document.getElementById("4").value = dados[selectedValue].Grau_de_Urbanizacao * 100
      document.getElementById("5").value = dados[selectedValue].Esgoto_Sanitario * 100
      document.getElementById("6").value = dados[selectedValue].Estab_por_mil_Hab * 100
      document.getElementById("7").value = dados[selectedValue].Doses_Aplicadas_mil_Hab * 100
      document.getElementById("8").value = dados[selectedValue].Razao_Medico_mil_Hab * 100
      document.getElementById("9").value = dados[selectedValue].Abastecimento_de_Agua * 100
    }
    function teste() {
      var x = document.getElementById("1").value;
      //document.getElementById("teste").innerHTML = x/100*100;

      //var myHeaders = new Headers();
      //myHeaders.append("Content-Type", "application/json");

      // myHeaders.append("Origin", "http://google.com");
      //myHeaders.append("Access-Control-Allow-Origin", "*");
      // myHeaders.append("Access-Control-Allow-Credentials", "true");
      // myHeaders.append("Access-Control-Allow-Methods", "GET,HEAD,OPTIONS,POST,PUT");
      // myHeaders.append("Access-Control-Allow-Headers", "Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers")

      // myHeaders.append("Mortalidade_infantil", "0");
      // myHeaders.append("Cod_IBGE", document.getElementById("municipios").value);
      // myHeaders.append("Coleta_de_Lixo", document.getElementById("1").value);
      // myHeaders.append("idhm_educacao", document.getElementById("2").value);
      // myHeaders.append("Renda_per_capita", document.getElementById("3").value);
      // myHeaders.append("Grau_de_Urbanizacao", document.getElementById("4").value);
      // myHeaders.append("Esgoto_Sanitario", document.getElementById("5").value);
      // myHeaders.append("Estab_por_mil_Hab", document.getElementById("6").value);
      // myHeaders.append("Doses_Aplicadas_mil_Hab", document.getElementById("7").value);
      // myHeaders.append("Razao_Medico_mil_Hab", document.getElementById("8").value);
      // myHeaders.append("Abastecimento_de_Agua", document.getElementById("9").value);

      var myHeaders = {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET,POST,PUT",
        "Origin": "http://google.com",
        "Cod_IBGE": "3500105",
        "Mortalidade_infantil": "0.069779",
        "idhm_educacao": "0.75",
        "IDHM_Educacao": "0.75",
        "Renda_per_capita": "0.493077",
        "Grau_de_Urbanizacao": "0.7638",
        "Esgoto_Sanitario": "0.9903",
        "Estab_por_mil_Hab": "0.601063",
        "Doses_Aplicadas_mil_Hab": "0.318119",
        "Razao_Medico_mil_Hab": "0.496123",
        "Abastecimento_de_Agua": "0.9976",
        "Coleta_de_Lixo": "0.9989"
      }

      var requestOptions = {
        method: 'GET', mode: 'cors',//'no-cors', 
        headers: myHeaders, redirect: 'follow'
      };
      fetch("https://6puqzz1q34.execute-api.us-east-1.amazonaws.com/v1", requestOptions)
        .then(response => {
          console.log("AAAAAAAAAAAAAAA ", response)
          response.text()
        })
        .then(result => console.log(result))
        .catch(error => console.log('error', error));

    }
    var html = "<option value='none'>Escolha</option>"
    for (let index = 0; index < dados.length; index++) {
      const e = dados[index];
      html += "<option value=" + index + ">" + e.Municipio + "</option>"
    }
    document.getElementById("municipios").innerHTML = html;
  </script>
</body>

</html>